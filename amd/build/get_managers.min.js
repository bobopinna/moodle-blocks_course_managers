define("block_course_managers/get_managers",["exports","core/ajax","core/notification","core/templates","core/str"],(function(_exports,_ajax,_notification,_templates,_str){var obj;
/**
   * Provides the list of courses managers.
   *
   * @module      block_course_managers/get_managers
   * @copyright   2023 Roberto Pinna
   * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=_exports.getManagers=void 0,_templates=(obj=_templates)&&obj.__esModule?obj:{default:obj};const Selectors_filter="#block-course_managers-search-filter",Selectors_list="#block-course_managers-list";var nothingString=null;_exports.init=async(blockId,orderBy)=>{_templates.default.appendNodeContents(Selectors_list,'<i class="fa-solid fa-circle-notch fa-spin fa-xl"></i>',"");const managers=await getManagers(blockId,orderBy);nothingString=await(0,_str.get_string)("nothingtodisplay","block_course_managers"),managers.length>0?(displayManagers(managers,Selectors_list,null),document.addEventListener("keyup",(e=>{e.target.closest(Selectors_filter)&&displayManagers(managers,Selectors_list,Selectors_filter)}))):(document.querySelectorAll(Selectors_list+" *").forEach((n=>n.remove())),_templates.default.appendNodeContents(Selectors_list,"<i>"+nothingString+"</i>",""))};const getManagers=(blockId,orderBy)=>(0,_ajax.call)([{methodname:"block_course_managers_get_managers",args:{blockid:blockId,orderby:orderBy}}],!0,!1)[0];_exports.getManagers=getManagers;const displayManagers=(managers,listSelector,filterSelector)=>{let query=null;if(null!==filterSelector&&(query=document.querySelector(filterSelector).value),managers.length>0){let counter=0;managers.forEach((manager=>{0==counter&&(document.querySelectorAll(listSelector+" *").forEach((n=>n.remove())),_templates.default.appendNodeContents(listSelector,"<ul></ul>","")),(null===query||manager.fullname.toLowerCase().includes(query.toLowerCase()))&&(counter++,_templates.default.renderForPromise("block_course_managers/manager_element",manager).then((_ref=>{let{html:html,js:js}=_ref;_templates.default.appendNodeContents(listSelector+" ul",html,js)})).catch((error=>(0,_notification.exception)(error))))})),0==counter&&_templates.default.appendNodeContents(listSelector,"<i>"+nothingString+"</i>","")}}}));

//# sourceMappingURL=get_managers.min.js.map